#include <fcntl.h>
#include <unistd.h>
#include <stdint.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>

#define PI_DEVICE "/dev/piControl0"
#define AI1_OFFSET 32      // <-- thay bằng offset thật
#define AI1_SIZE   2

int main() {
    int fd = open(PI_DEVICE, O_RDONLY);
    if (fd < 0) {
        perror("open piControl0");
        return 1;
    }

    uint16_t raw = 0;
    ssize_t r = pread(fd, &raw, AI1_SIZE, AI1_OFFSET);
    if (r != AI1_SIZE) {
        printf("pread failed: %s\n", strerror(errno));
        close(fd);
        return 2;
    }

    close(fd);

    printf("AnalogInput_1 raw = %u\n", raw);
    return 0;
}
