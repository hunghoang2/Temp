sudo apt update
sudo apt install -y \
  build-essential git perl python3 \
  libgl1-mesa-dev libglu1-mesa-dev \
  libx11-dev libxext-dev libxrender-dev libxkbcommon-dev \
  libxkbcommon-x11-dev libfontconfig1-dev libfreetype6-dev \
  libxcb1-dev libxcb-keysyms1-dev libxcb-render0-dev \
  libxcb-render-util0-dev libxcb-image0-dev libxcb-shm0-dev \
  libxcb-icccm4-dev libxcb-sync-dev libxcb-xfixes0-dev \
  libxcb-shape0-dev libxcb-randr0-dev libxcb-glx0-dev \
  libxcb-xinerama0-dev libxcb-xinput-dev \
  libssl-dev libicu-dev libdbus-1-dev


SYSROOT=/opt/sysroot-jetson-qt5

# 1) Thư viện hệ thống (glibc, libstdc++, v.v.)
rsync -a /lib/aarch64-linux-gnu  $SYSROOT/lib/
rsync -a /usr/lib/aarch64-linux-gnu  $SYSROOT/usr/lib/

# 2) Header (stdlib + headers của Qt)
rsync -a /usr/include  $SYSROOT/usr/

# 3) Qt directories (tuỳ Ubuntu, thường có các dir này)
#   - thư viện + plugin + qml:
if [ -d /usr/lib/qt5 ]; then
  rsync -a /usr/lib/qt5  $SYSROOT/usr/lib/
fi

#   - share data, mkspecs, plugins metadata:
if [ -d /usr/share/qt5 ]; then
  rsync -a /usr/share/qt5  $SYSROOT/usr/share/
fi

# 4) CMake config của Qt5 (để CMake trên PC tìm thấy Qt)
if ls /usr/lib/aarch64-linux-gnu/cmake/Qt5* >/dev/null 2>&1; then
  rsync -a /usr/lib/aarch64-linux-gnu/cmake  $SYSROOT/usr/lib/aarch64-linux-gnu/
fi

# 5) Một chút cấu hình cho linker
rsync -a /etc/ld.so.conf /etc/ld.so.conf.d  $SYSROOT/etc/
